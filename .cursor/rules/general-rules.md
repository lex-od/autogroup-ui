# Общие правила разработки

## TypeScript

### Обязательные требования

- Строгая типизация во всех файлах
- Никогда не используй `any` - используй конкретные типы
- Всегда типизируй пропсы компонентов через `interface` или `type`
- Создавай отдельные типы для API ответов
- Объявления типов всегда размещай рядом с основной сущностью, к которой они относятся, в том же файле
- Не создавай отдельные файлы для типов

### Паттерны типизации

- Предпочитай `interface` вместо `type` для объектов

### Примеры

```typescript
// Правильно
interface UserProps {
  user: User;
  onUpdate: (user: User) => void;
}

// Неправильно
const UserComponent = (props: any) => {};
```

## React

### Компоненты

- Только функциональные компоненты
- Объявляй компоненты как стрелочную функцию, используй тип `FC`
- Экспортируй компоненты с помощью дефолтного экспорта
- Используй React 19 фичи когда это уместно
- Всегда деструктуризируй пропсы в параметрах функции
- Одни компонент - один файл
- Не создавай самостоятельно новые компоненты в папках для глобальных, переиспользуемых компонентов
- Если ты создаешь компонент, который используется в нескольких местах - размещай его в ближайшей, верхней папке, которая содержит все места использования
- Если нужно добавить новые компоненты из shadcn/ui - всегда запрашивай пользователя, чтобы он сделал это самостоятельно
- Всегда делай разбивку кода на компоненты, руководствуйся лучшими практиками

### Хуки и состояние

- Используй `useCallback` и `useMemo` только при необходимости
- Избегай глубокой вложенности в `useEffect`

### Производительность

- Оптимизируй ререндеры через правильные зависимости

### Примеры

```typescript
// Правильно
import { FC } from 'react';

interface CallCommentsProps {
  callId: string;
}

const CallComments: FC<CallCommentsProps> = ({ callId }) => {};
```

## Next.js

### Зависимости и конфигурация проекта

- Самостоятельно не добавляй в проект новые зависимости и не обновляй существующие
- Если нужно добавить новые зависимости - всегда запрашивай пользователя, чтобы он сделал это самостоятельно
- Самостоятельно не изменяй глобальные конфигурационные файлы проекта. Если есть необходимость - спроси пользователя

### App Router

- Используй только App Router (папка app/)

### Структура страниц

- Файлы страниц page.tsx поддерживай в чистоте
- В стандартном случае, в page.tsx рендери только компонент соответствующего "экрана" из папки screens
- Вся основная логика и разметка - в компоненте "экрана"

## ESLint

### Обязательные правила

- Используй правила EsLint проекта (настройки в файле eslint.config.mjs)
- Используй все рекомендуемые правила Next.js
- Используй TypeScript ESLint правила
- Используй правила для React хуков
- Используй Prettier для форматирования (настройки в файле .prettierrc)
- После внесения изменений, всегда создавай билд, чтобы убедиться в отсутствии ошибок
- Если при создании билда возникли ошибки - исправляй

## Архитектура директорий проекта

```
src/
├── app/                         # Next.js App Router
│   ├── dashboard/               # Route group для dashboard
│   │   └── layout.tsx           # Layout для dashboard
│   ├── auth/                    # Аутентификация
│   │   └── layout.tsx           # Layout для auth
│   ├── globals.css              # Глобальные стили
│   ├── layout.tsx               # Root layout
├── components/                  # React компоненты
│   ├── ui/                      # Shadcn/ui компоненты
│   │   ├── button.tsx
│   │   ├── input.tsx
│   │   └── ...
│   ├── forms/                   # Компоненты форм
│   │   ├── LoginForm.tsx
│   │   └── GroupForm.tsx
│   ├── layout/                  # Layout компоненты
│   │   ├── Header.tsx
│   │   ├── Sidebar.tsx
│   │   └── Footer.tsx
│   └── common/                  # Общие компоненты
│       ├── LoadingSpinner.tsx
│       └── ErrorBoundary.tsx
├── lib/                         # Утилиты и конфигурация
│   ├── utils.ts                 # Общие утилиты
│   ├── cn.ts                    # Class name утилита
│   └── constants.ts             # Константы приложения
├── hooks/                       # Кастомные React хуки
│   ├── useAuth.ts
│   └── useLocalStorage.ts
├── types/                       # TypeScript типы
│   ├── auth.ts                  # Типы для аутентификации
│   ├── api.ts                   # Типы для API
│   └── index.ts                 # Экспорт всех типов
└── styles/                      # Дополнительные стили
    └── components.css           # Стили для компонентов
```

## Общие принципы файловой структуры

### Именование файлов

- PascalCase для React компонентов (UserCard.tsx)
- camelCase для утилит и хуков (useAuth.ts)
- kebab-case для страниц и папок (user-profile/)
- Используй index.ts для barrel exports

### Организация импортов

- Сначала внешние библиотеки
- Затем внутренние модули
- Локальные импорты в конце
- Используй абсолютные пути через tsconfig

### Принципы разделения

- Одна ответственность на файл
- Группируй связанную функциональность
- Выноси переиспользуемый код в отдельные модули
- Держи компоненты максимально простыми
